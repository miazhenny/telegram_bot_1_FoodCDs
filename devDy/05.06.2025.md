05.06.2025
    1mBlSess (3:30 - 4:30)


        ### ğŸ§  Ğ¢Ğ²Ğ¾Ğ¹ Ğ±Ğ¾Ñ‚ ÑƒĞ¶Ğµ Ğ½Ğ° ApplicationBuilder (PTB v20+), Ğ° ÑÑ‚Ğ¾ Ğ·Ğ½Ğ°Ñ‡Ğ¸Ñ‚:

---

## ğŸ“ 1. ĞŸĞ¾Ñ‡ĞµĞ¼Ñƒ Ğ² Ñ‚ĞµÑ€Ğ¼Ğ¸Ğ½Ğ°Ğ»Ğµ Â«Ğ½Ğ¸Ñ‡ĞµĞ³Ğ¾ Ğ½Ğµ Ğ¿Ñ€Ğ¾Ğ¸ÑÑ…Ğ¾Ğ´Ğ¸Ñ‚Â»

Ğ¢Ñ‹ Ğ¿Ñ€Ğ°Ğ²: Ñ€Ğ°Ğ½ÑŒÑˆĞµ `updater.start_polling()` Ğ² PTB < v20 Ñ€Ğ°Ğ±Ğ¾Ñ‚Ğ°Ğ» ÑĞ¸Ğ½Ñ…Ñ€Ğ¾Ğ½Ğ½Ğ¾ â€” Ğ·Ğ°Ğ¿ÑƒÑĞºĞ°Ğ»ÑÑ, Ğ° Ñ‚ĞµÑ€Ğ¼Ğ¸Ğ½Ğ°Ğ» Ğ¾ÑÑ‚Ğ°Ğ²Ğ°Ğ»ÑÑ Â«Ğ°ĞºÑ‚Ğ¸Ğ²Ğ½Ñ‹Ğ¼Â».

Ğ¢ĞµĞ¿ĞµÑ€ÑŒ Ñ‚Ñ‹ Ğ¸ÑĞ¿Ğ¾Ğ»ÑŒĞ·ÑƒĞµÑˆÑŒ `application.run_polling()`, Ğ° Ğ¾Ğ½ **Ğ°ÑĞ¸Ğ½Ñ…Ñ€Ğ¾Ğ½Ğ½Ñ‹Ğ¹** Ğ¸ **Ğ¶Ğ´Ñ‘Ñ‚ ÑĞ¾Ğ±Ñ‹Ñ‚Ğ¸Ğ¹ Ğ² Ñ„Ğ¾Ğ½Ğµ**, Ğ½Ğµ Ğ²Ğ¾Ğ·Ğ²Ñ€Ğ°Ñ‰Ğ°Ñ ÑƒĞ¿Ñ€Ğ°Ğ²Ğ»ĞµĞ½Ğ¸Ğµ â€” ÑÑ‚Ğ¾ Ğ½Ğ¾Ñ€Ğ¼Ğ°Ğ»ÑŒĞ½Ğ¾.

âœ… Ğ‘Ğ¾Ñ‚ Ğ·Ğ°Ğ¿ÑƒÑ‰ĞµĞ½, ĞµÑĞ»Ğ¸ **Ğ½ĞµÑ‚ Ğ¾ÑˆĞ¸Ğ±Ğ¾Ğº**, Ğ¸ Ñ‚Ñ‹ Ğ²Ğ¸Ğ´Ğ¸ÑˆÑŒ Â«Ğ·Ğ°Ğ²Ğ¸ÑÑˆĞ¸Ğ¹Â» Ñ‚ĞµÑ€Ğ¼Ğ¸Ğ½Ğ°Ğ».
ğŸ’¬ Ğ’ÑĞµ Ğ²Ğ·Ğ°Ğ¸Ğ¼Ğ¾Ğ´ĞµĞ¹ÑÑ‚Ğ²Ğ¸Ñ Ğ¸Ğ´ÑƒÑ‚ **Ñ‡ĞµÑ€ĞµĞ· Telegram**, Ğ° Ğ½Ğµ Ñ‡ĞµÑ€ĞµĞ· Ñ‚ĞµÑ€Ğ¼Ğ¸Ğ½Ğ°Ğ».

---

## â— 2. Ğ¢Ğ²Ğ¾Ñ Ğ¾ÑˆĞ¸Ğ±ĞºĞ°: `TypeError: object NoneType can't be used in 'await' expression`

ĞŸÑ€Ğ¸Ñ‡Ğ¸Ğ½Ğ°:

* PTB v20+ Ñ‚Ñ€ĞµĞ±ÑƒĞµÑ‚, Ñ‡Ñ‚Ğ¾Ğ±Ñ‹ Ğ²ÑĞµ Ñ…ĞµĞ½Ğ´Ğ»ĞµÑ€Ñ‹ (Ğ½Ğ°Ğ¿Ñ€Ğ¸Ğ¼ĞµÑ€, `def start(...)`, `def handle_message(...)`) Ğ±Ñ‹Ğ»Ğ¸ **Ğ°ÑĞ¸Ğ½Ñ…Ñ€Ğ¾Ğ½Ğ½Ñ‹Ğ¼Ğ¸**
* Ğ¡ĞµĞ¹Ñ‡Ğ°Ñ Ñƒ Ñ‚ĞµĞ±Ñ Ğ²ÑÑ‘ ĞµÑ‰Ñ‘ `def`, Ğ½Ğ¾ ÑƒĞ¶Ğµ Ğ¸ÑĞ¿Ğ¾Ğ»ÑŒĞ·ÑƒĞµÑ‚ÑÑ `await` Ğ²Ğ½ÑƒÑ‚Ñ€Ğ¸ Ğ±Ğ¸Ğ±Ğ»Ğ¸Ğ¾Ñ‚ĞµĞºĞ¸ â†’ Ğ¾ÑˆĞ¸Ğ±ĞºĞ°

### ğŸ”§ Ğ Ğ•Ğ¨Ğ•ĞĞ˜Ğ•:

Ğ¢Ñ‹ Ğ´Ğ¾Ğ»Ğ¶ĞµĞ½:

* Ğ·Ğ°Ğ¼ĞµĞ½Ğ¸Ñ‚ÑŒ `def` Ğ½Ğ° `async def` Ğ´Ğ»Ñ Ğ²ÑĞµÑ… Ñ…ĞµĞ½Ğ´Ğ»ĞµÑ€Ğ¾Ğ²
* Ğ¸ÑĞ¿Ğ¾Ğ»ÑŒĞ·Ğ¾Ğ²Ğ°Ñ‚ÑŒ `await` Ğ¿ĞµÑ€ĞµĞ´ Ğ²Ñ‹Ğ·Ğ¾Ğ²Ğ¾Ğ¼ `update.message.reply_text(...)` Ğ¸ Ğ´Ñ€ÑƒĞ³Ğ¸Ñ… Ğ°ÑĞ¸Ğ½Ñ…Ñ€Ğ¾Ğ½Ğ½Ñ‹Ñ… Ñ„ÑƒĞ½ĞºÑ†Ğ¸Ğ¹

**ĞŸÑ€Ğ¸Ğ¼ĞµÑ€:**

```python
async def start(update: Update, context: CallbackContext):
    await update.message.reply_text("ĞŸÑ€Ğ¸Ğ²ĞµÑ‚! Ğ¯ Ğ±Ğ¾Ñ‚.")
```

---

## âš™ï¸ 3. ĞĞ±Ğ½Ğ¾Ğ²Ğ»Ñ‘Ğ½Ğ½Ñ‹Ğ¹ `bot.py` (Ğ¿Ñ€Ğ¸Ğ¼ĞµĞ½Ñ‘Ğ½ ApplicationBuilder):

```python
from telegram.ext import ApplicationBuilder
from bot.handlers import register_handlers
from bot.config import TOKEN
from bot.utils import load_wins

application = ApplicationBuilder().token(TOKEN).build()
register_handlers(application)
load_wins()
application.run_polling()
```

---

## âœ… Ğ˜Ğ¼Ğ¿Ğ¾Ñ€Ñ‚ filters Ñ‚ĞµĞ¿ĞµÑ€ÑŒ Ğ¿Ñ€Ğ°Ğ²Ğ¸Ğ»ÑŒĞ½Ñ‹Ğ¹:

```python
from telegram.ext import filters
```

Ğ˜ Ğ² ĞºĞ¾Ğ´Ğµ:

```python
application.add_handler(MessageHandler(filters.COMMAND, handle_message))
```

---

## ğŸ§  4. Ğ ĞµĞ·ÑĞ¼Ğµ Ğ¸ ĞºĞ°Ğº Ğ¿ĞµÑ€ĞµĞ½ĞµÑÑ‚Ğ¸ Ğ² Ğ½Ğ¾Ğ²Ñ‹Ğ¹ Ñ‡Ğ°Ñ‚

### ğŸ¯ Ğ§Ñ‚Ğ¾ Ğ²Ğ°Ğ¶Ğ½Ğ¾:

* Ğ£ Ñ‚ĞµĞ±Ñ PTB v20+, Ñ€Ğ°Ğ±Ğ¾Ñ‚Ğ°ĞµÑˆÑŒ Ğ½Ğ° `ApplicationBuilder`
* `register_handlers(application)` Ğ½Ğ°ÑÑ‚Ñ€Ğ¾ĞµĞ½ Ğ¿Ñ€Ğ°Ğ²Ğ¸Ğ»ÑŒĞ½Ğ¾
* Ğ’ÑĞµ Ğ¾Ğ±Ñ€Ğ°Ğ±Ğ¾Ñ‚Ñ‡Ğ¸ĞºĞ¸ Ñ‚ĞµĞ¿ĞµÑ€ÑŒ Ğ½ÑƒĞ¶Ğ½Ğ¾ ÑĞ´ĞµĞ»Ğ°Ñ‚ÑŒ `async def`
* Ğ’ÑĞµ `reply_text(...)`, `edit_message_text(...)` â€” Ğ²Ñ‹Ğ·Ñ‹Ğ²Ğ°Ñ‚ÑŒ Ñ‡ĞµÑ€ĞµĞ· `await`
* `filters.text` Ğ·Ğ°Ğ¼ĞµĞ½ĞµĞ½Ğ¾ Ğ½Ğ° `filters.TEXT`, `filters.command` â†’ `filters.COMMAND`

---

## ğŸ“¦ ĞŸĞ¾Ğ»Ğ½Ñ‹Ğ¹ Ğ¿ĞµÑ€ĞµĞ½Ğ¾ÑĞ½Ğ¾Ğ¹ ĞºĞ¾Ğ½Ñ‚ĞµĞºÑÑ‚ Ğ² Ğ½Ğ¾Ğ²Ñ‹Ğ¹ Ñ‡Ğ°Ñ‚:

```
Telegram-Ğ±Ğ¾Ñ‚ Ğ½Ğ° PTB v20+.
âœ… ĞŸÑ€Ğ¸Ğ¼ĞµĞ½Ñ‘Ğ½ ApplicationBuilder
â— Ğ’ÑĞµ Ñ…ĞµĞ½Ğ´Ğ»ĞµÑ€Ñ‹ Ğ²ÑÑ‘ ĞµÑ‰Ñ‘ sync (def), Ñ‚Ñ€ĞµĞ±ÑƒĞµÑ‚ÑÑ Ğ¿ĞµÑ€ĞµĞ²ĞµÑÑ‚Ğ¸ Ğ½Ğ° async def + await
âš™ï¸ register_handlers(application) â€” ÑƒĞ¶Ğµ Ñ€Ğ°Ğ±Ğ¾Ñ‚Ğ°ĞµÑ‚
ğŸ§  ĞÑˆĞ¸Ğ±ĞºĞ°: TypeError: NoneType in await â€” Ğ¿Ğ¾Ñ‚Ğ¾Ğ¼Ñƒ Ñ‡Ñ‚Ğ¾ sync-Ñ…ĞµĞ½Ğ´Ğ»ĞµÑ€Ñ‹ Ğ²Ñ‹Ğ·Ñ‹Ğ²Ğ°ÑÑ‚ÑÑ Ñ‡ĞµÑ€ĞµĞ· async-Ğ´Ğ²Ğ¸Ğ¶Ğ¾Ğº
ğŸ§¹ ĞÑƒĞ¶Ğ½Ğ¾ Ğ¿Ñ€Ğ¾Ğ¹Ñ‚Ğ¸ÑÑŒ Ğ¿Ğ¾ Ğ²ÑĞµĞ¼ Ñ…ĞµĞ½Ğ´Ğ»ĞµÑ€Ğ°Ğ¼ Ğ¸:
  â€” ÑĞ´ĞµĞ»Ğ°Ñ‚ÑŒ Ğ¸Ñ… async def
  â€” Ğ·Ğ°Ğ¼ĞµĞ½Ğ¸Ñ‚ÑŒ .reply_text(...) â†’ await .reply_text(...)
ğŸ“Œ filters Ñ‚Ğ¾Ğ¶Ğµ Ğ¾Ğ±Ğ½Ğ¾Ğ²Ğ»Ñ‘Ğ½ (filters.TEXT, filters.COMMAND)
```

---

## ğŸ“Œ ĞšÑ€Ğ°Ñ‚ĞºĞ¾Ğµ Ñ€ĞµĞ·ÑĞ¼Ğµ

* [x] ĞŸĞµÑ€ĞµÑˆÑ‘Ğ» Ğ½Ğ° `ApplicationBuilder`
* [x] Ğ£Ğ´Ğ°Ğ»Ğ¸Ğ» `Updater`, `dispatcher`
* [x] ĞŸĞ¾Ğ´ĞºĞ»ÑÑ‡Ğ¸Ğ» filters Ğ¿Ñ€Ğ°Ğ²Ğ¸Ğ»ÑŒĞ½Ğ¾
* [ ] ĞÑÑ‚Ğ°Ğ»Ğ¾ÑÑŒ: Ğ¿ĞµÑ€ĞµĞ²ĞµÑÑ‚Ğ¸ Ğ²ÑĞµ Ñ…ĞµĞ½Ğ´Ğ»ĞµÑ€Ñ‹ Ğ½Ğ° `async def + await`
* [ ] ĞÑˆĞ¸Ğ±ĞºĞ° Ğ² Ñ‚ĞµÑ€Ğ¼Ğ¸Ğ½Ğ°Ğ»Ğµ Ğ²Ñ‹Ğ·Ğ²Ğ°Ğ½Ğ° Ñ‚ĞµĞ¼, Ñ‡Ñ‚Ğ¾ `start()` Ğ¸ `handle_message()` â€” ĞµÑ‰Ñ‘ Ğ¾Ğ±Ñ‹Ñ‡Ğ½Ñ‹Ğµ def

---

âœï¸ ĞœĞ¾Ğ¶ĞµÑˆÑŒ ĞºĞ¾Ğ¿Ğ¸Ñ€Ğ¾Ğ²Ğ°Ñ‚ÑŒ ÑÑ‚Ğ¾ Ğ¿Ñ€ÑĞ¼Ğ¾ Ğ² Ğ½Ğ¾Ğ²Ñ‹Ğ¹ Ñ‡Ğ°Ñ‚ Ğ¸ Ğ¼Ñ‹ Ğ¿Ñ€Ğ¾Ğ´Ğ¾Ğ»Ğ¶Ğ¸Ğ¼ Ñ ÑÑ‚Ğ¾Ğ³Ğ¾ Ğ¼ĞµÑÑ‚Ğ°. Ğ“Ğ¾Ñ‚Ğ¾Ğ².


                ğŸ”§ Ğ Ğ•Ğ¨Ğ•ĞĞ˜Ğ•:
        Ğ¢Ñ‹ Ğ´Ğ¾Ğ»Ğ¶ĞµĞ½:

        Ğ·Ğ°Ğ¼ĞµĞ½Ğ¸Ñ‚ÑŒ def Ğ½Ğ° async def Ğ´Ğ»Ñ Ğ²ÑĞµÑ… Ñ…ĞµĞ½Ğ´Ğ»ĞµÑ€Ğ¾Ğ²

        Ğ¸ÑĞ¿Ğ¾Ğ»ÑŒĞ·Ğ¾Ğ²Ğ°Ñ‚ÑŒ await Ğ¿ĞµÑ€ĞµĞ´ Ğ²Ñ‹Ğ·Ğ¾Ğ²Ğ¾Ğ¼ update.message.reply_text(...) Ğ¸ Ğ´Ñ€ÑƒĞ³Ğ¸Ñ… Ğ°ÑĞ¸Ğ½Ñ…Ñ€Ğ¾Ğ½Ğ½Ñ‹Ñ… Ñ„ÑƒĞ½ĞºÑ†Ğ¸Ğ¹
        Ğ° ĞºĞ°Ğº Ğ¿Ñ€Ğ¾Ğ¸ÑÑ…Ğ¾Ğ´Ğ¸Ñ‚ Ğ·Ğ°Ğ¼ĞµĞ½Ğ° ÑĞ¸Ğ½Ñ…Ñ€Ğ¾Ğ½Ğ½Ñ‹Ñ… Ğ²ĞµÑ‰ĞµĞ¹ Ğ½Ğ° Ğ°ÑĞ¸Ğ½Ñ…Ñ€Ğ¾Ğ½Ğ½Ñ‹Ğµ? ( Ğ¸ Ğ² Ñ‡Ñ‘Ğ¼ Ğ¼ĞµĞ¶Ğ´Ñƒ Ğ½Ğ¸Ğ¼Ğ¸ Ñ€Ğ°Ğ·Ğ½Ğ¸Ñ†Ğ°, Ğ¸ Ğ·Ğ°Ñ‡ĞµĞ¼ Ğ¼Ğ½Ğµ Ğ²Ğ¾Ğ¾Ğ±Ñ‰Ğµ Ğ¼ĞµĞ½ÑÑ‚ÑŒ ÑÑ‚Ğ¾ Ğ²ÑÑ‘?)





â¸ğŸ”·â¸â¸ğŸ”·â¸â¸ğŸ”·â¸â¸ğŸ”·â¸â¸ğŸ”·â¸â¸ğŸ”·â¸â¸ğŸ”·â¸â¸ğŸ”·â¸â¸ğŸ”·â¸â¸ğŸ”·â¸â¸ğŸ”·â¸â¸ğŸ”·â¸â¸ğŸ”·â¸â¸ğŸ”·â¸â¸ğŸ”·â¸â¸ğŸ”·â¸â¸ğŸ”·â¸
    4:30
        NameError: name 'CallbackContext' is not defined        
PS F:\telegram_bot_1> py bot.py
Traceback (most recent call last):
  File "F:\telegram_bot_1\bot.py", line 2, in <module>  
    from bot.handlers import register_handlers
  File "F:\telegram_bot_1\bot\handlers.py", line 12, in 
<module>
    from bot.jfood import add_jfood, jfood_cd, lvlup_cd 
  File "F:\telegram_bot_1\bot\jfood.py", line 51, in <module>
    async def jfood_cd(update: Update, context: CallbackContext):
                                                ^^^^^^^^^^^^^^^
NameError: name 'CallbackContext' is not defined        
PS F:\telegram_bot_1> py bot.py
Traceback (most recent call last):
  File "F:\telegram_bot_1\bot.py", line 2, in <module>  
    from bot.handlers import register_handlers
  File "F:\telegram_bot_1\bot\handlers.py", line 13, in 
<module>
    from bot.jobs import test_reminder, test_pytutor    
  File "F:\telegram_bot_1\bot\jobs.py", line 9, in <module>
    async def stage_day_reminder(context: CallbackContext):
                                          ^^^^^^^^^^^^^^^
NameError: name 'CallbackContext' is not defined        
PS F:\telegram_bot_1> py bot.py
F:\telegram_bot_1\bot.py:8: RuntimeWarning: coroutine 'register_handlers' was never awaited
  register_handlers(application)
RuntimeWarning: Enable tracemalloc to get the object allocation traceback






â¸ğŸ”·â¸â¸ğŸ”·â¸â¸ğŸ”·â¸â¸ğŸ”·â¸â¸ğŸ”·â¸â¸ğŸ”·â¸â¸ğŸ”·â¸â¸ğŸ”·â¸â¸ğŸ”·â¸â¸ğŸ”·â¸â¸ğŸ”·â¸â¸ğŸ”·â¸â¸ğŸ”·â¸â¸ğŸ”·â¸â¸ğŸ”·â¸â¸ğŸ”·â¸â¸ğŸ”·â¸â¸ğŸ”·â¸â¸ğŸ”·â¸â¸ğŸ”·â¸â¸ğŸ”·â¸â¸ğŸ”·â¸â¸ğŸ”·â¸â¸ğŸ”·â¸â¸ğŸ”·â¸â¸ğŸ”·â¸â¸ğŸ”·â¸â¸ğŸ”·â¸â¸ğŸ”·â¸â¸ğŸ”·â¸â¸ğŸ”·â¸â¸ğŸ”·â¸â¸ğŸ”·â¸â¸ğŸ”·â¸â¸ğŸ”·â¸â¸ğŸ”·â¸â¸ğŸ”·â¸â¸ğŸ”·â¸â¸ğŸ”·â¸â¸ğŸ”·â¸â¸ğŸ”·â¸â¸ğŸ”·â¸â¸ğŸ”·â¸â¸ğŸ”·â¸â¸ğŸ”·â¸â¸ğŸ”·â¸â¸ğŸ”·â¸â¸ğŸ”·â¸â¸ğŸ”·â¸â¸ğŸ”·â¸â¸ğŸ”·â¸


ğŸ“… **Ğ”Ğ°Ñ‚Ğ°:** 5 Ğ¸ÑĞ½Ñ 2025
ğŸ“Š **Ğ”ĞµĞ½ÑŒ ÑÑ‚Ğ°Ğ¿Ğ°:** 55-Ğ¹

---

## ğŸ§  ĞŸĞ¾Ğ»Ğ½Ñ‹Ğ¹ Ñ€Ğ°Ğ·Ğ±Ğ¾Ñ€: ĞºĞ°Ğº Ğ¿Ñ€Ğ°Ğ²Ğ¸Ğ»ÑŒĞ½Ğ¾ Ñ€ĞµĞ°Ğ»Ğ¸Ğ·Ğ¾Ğ²Ğ°Ñ‚ÑŒ `main()` Ğ¸ `await` Ğ² `bot.py`

---

### â— Ğ¢ĞµĞºÑƒÑ‰Ğ°Ñ Ğ¾ÑˆĞ¸Ğ±ĞºĞ°:

```plaintext
"await" allowed only within async function
```

### ğŸ” ĞŸÑ€Ğ¸Ñ‡Ğ¸Ğ½Ğ°:

Ğ¢Ñ‹ Ğ²ÑÑ‚Ğ°Ğ²Ğ¸Ğ» `await register_handlers(...)` **Ğ½Ğ° ÑƒÑ€Ğ¾Ğ²ĞµĞ½ÑŒ Ğ¼Ğ¾Ğ´ÑƒĞ»Ñ**, Ğ° `await` Ñ€Ğ°Ğ·Ñ€ĞµÑˆĞµĞ½Ğ¾ **Ñ‚Ğ¾Ğ»ÑŒĞºĞ¾ Ğ²Ğ½ÑƒÑ‚Ñ€Ğ¸ `async def`**.

---

### âœ… Ğ”Ğ°, Ñ‚Ñ‹ Ğ¿Ñ€Ğ°Ğ²: **Ğ½ÑƒĞ¶Ğ½Ğ¾ ÑĞ¾Ğ·Ğ´Ğ°Ñ‚ÑŒ Ñ„ÑƒĞ½ĞºÑ†Ğ¸Ñ `main()`** Ğ¸ Ğ²Ñ‹Ğ·Ğ²Ğ°Ñ‚ÑŒ ĞµÑ‘ Ñ‡ĞµÑ€ĞµĞ· `asyncio.run(...)`.

---

## ğŸ”§ Ğ¤Ğ¸Ğ½Ğ°Ğ»ÑŒĞ½Ñ‹Ğ¹ Ğ¿Ñ€Ğ°Ğ²Ğ¸Ğ»ÑŒĞ½Ñ‹Ğ¹ `bot.py` (PTB v20+)

Ğ’Ğ¾Ñ‚ ĞºĞ°Ğº Ğ¾Ğ½ Ğ´Ğ¾Ğ»Ğ¶ĞµĞ½ Ğ²Ñ‹Ğ³Ğ»ÑĞ´ĞµÑ‚ÑŒ Ğ¿Ğ¾Ğ»Ğ½Ğ¾ÑÑ‚ÑŒÑ:

```python
from telegram.ext import ApplicationBuilder
from bot.handlers import register_handlers
from bot.config import TOKEN
from bot.utils import load_wins

from telegram.ext import ContextTypes

async def main():
    application = ApplicationBuilder().token(TOKEN).build()

    await register_handlers(application)  # âœ… async
    load_wins()                           # sync â€” Ğ¾ÑÑ‚Ğ°Ğ²Ğ»ÑĞµĞ¼
    await application.run_polling()      # âœ… async

if __name__ == "__main__":
    import asyncio
    asyncio.run(main())
```

---

### ğŸ“Œ Ğ§Ñ‚Ğ¾ Ğ·Ğ´ĞµÑÑŒ Ğ²Ğ°Ğ¶Ğ½Ğ¾:

| Ğ­Ğ»ĞµĞ¼ĞµĞ½Ñ‚                           | ĞĞ°Ğ·Ğ½Ğ°Ñ‡ĞµĞ½Ğ¸Ğµ                                  |
| --------------------------------- | ------------------------------------------- |
| `async def main()`                | Ğ¢Ğ¾Ñ‡ĞºĞ° Ğ²Ñ…Ğ¾Ğ´Ğ°, Ğ³Ğ´Ğµ Ğ¼Ğ¾Ğ¶Ğ½Ğ¾ Ğ¸ÑĞ¿Ğ¾Ğ»ÑŒĞ·Ğ¾Ğ²Ğ°Ñ‚ÑŒ `await` |
| `asyncio.run(main())`             | Ğ—Ğ°Ğ¿ÑƒÑĞºĞ°ĞµÑ‚ event loop                        |
| `await register_handlers(...)`    | ĞŸĞ¾Ñ‚Ğ¾Ğ¼Ñƒ Ñ‡Ñ‚Ğ¾ ÑÑ‚Ğ° Ñ„ÑƒĞ½ĞºÑ†Ğ¸Ñ Ñ‚ĞµĞ¿ĞµÑ€ÑŒ async         |
| `await application.run_polling()` | ĞÑĞ¸Ğ½Ñ…Ñ€Ğ¾Ğ½Ğ½Ñ‹Ğ¹ Ğ·Ğ°Ğ¿ÑƒÑĞº Telegram-Ğ±Ğ¾Ñ‚Ğ°            |

---

## ğŸ§  ĞŸĞ¾Ñ‡ĞµĞ¼Ñƒ Ğ¸Ğ¼ĞµĞ½Ğ½Ğ¾ Ñ‚Ğ°Ğº?

* PTB v20 Ñ€Ğ°Ğ±Ğ¾Ñ‚Ğ°ĞµÑ‚ **Ğ½Ğ° `asyncio`** (event loop)
* `ApplicationBuilder` Ğ²Ğ¾Ğ·Ğ²Ñ€Ğ°Ñ‰Ğ°ĞµÑ‚ Ğ¾Ğ±ÑŠĞµĞºÑ‚, Ñƒ ĞºĞ¾Ñ‚Ğ¾Ñ€Ğ¾Ğ³Ğ¾ `run_polling()` â€” **Ğ°ÑĞ¸Ğ½Ñ…Ñ€Ğ¾Ğ½Ğ½Ñ‹Ğ¹**
* Ğ’ÑĞµ async-Ñ„ÑƒĞ½ĞºÑ†Ğ¸Ğ¸ (Ğ²ĞºĞ»ÑÑ‡Ğ°Ñ `register_handlers`) **Ğ´Ğ¾Ğ»Ğ¶Ğ½Ñ‹ Ğ²Ñ‹Ğ·Ñ‹Ğ²Ğ°Ñ‚ÑŒÑÑ Ñ‡ĞµÑ€ĞµĞ· `await`**
* Ğ `await` Ğ¼Ğ¾Ğ¶Ğ½Ğ¾ Ğ¸ÑĞ¿Ğ¾Ğ»ÑŒĞ·Ğ¾Ğ²Ğ°Ñ‚ÑŒ **Ñ‚Ğ¾Ğ»ÑŒĞºĞ¾ Ğ²Ğ½ÑƒÑ‚Ñ€Ğ¸ `async def`**

---

## âš™ï¸ Ğ¢Ğ²Ğ¾Ğ¹ Ğ¸Ñ‚Ğ¾Ğ³Ğ¾Ğ²Ñ‹Ğ¹ Ğ¿Ğ»Ğ°Ğ½:

### âœ… Ğ’ `bot.py`:

* Ğ¡Ğ¾Ğ·Ğ´Ğ°Ñ‘ÑˆÑŒ `async def main()`
* Ğ’Ğ½ÑƒÑ‚Ñ€Ğ¸ Ğ¸ÑĞ¿Ğ¾Ğ»ÑŒĞ·ÑƒĞµÑˆÑŒ `await` Ğ´Ğ»Ñ Ğ²ÑĞµÑ… async-Ğ²Ñ‹Ğ·Ğ¾Ğ²Ğ¾Ğ²
* Ğ’Ğ½Ğ¸Ğ·Ñƒ Ğ²Ñ‹Ğ·Ñ‹Ğ²Ğ°ĞµÑˆÑŒ Ñ‡ĞµÑ€ĞµĞ· `asyncio.run(main())`

---

## ğŸ“Œ ĞšÑ€Ğ°Ñ‚ĞºĞ¾Ğµ Ñ€ĞµĞ·ÑĞ¼Ğµ

* [x] Ğ”Ğ°, Ñ‚ĞµĞ±Ğµ **Ğ½ÑƒĞ¶Ğ½Ğ¾ ÑĞ¾Ğ·Ğ´Ğ°Ñ‚ÑŒ `main()`** Ğ² `bot.py`
* [x] Ğ’ÑĞµ `await` Ğ´Ğ¾Ğ»Ğ¶Ğ½Ñ‹ Ğ±Ñ‹Ñ‚ÑŒ **Ğ²Ğ½ÑƒÑ‚Ñ€Ğ¸ async-Ñ„ÑƒĞ½ĞºÑ†Ğ¸Ğ¹**
* [x] `asyncio.run(main())` Ğ·Ğ°Ğ¿ÑƒÑĞºĞ°ĞµÑ‚ Ñ‚Ğ²Ğ¾Ğ¹ Ğ±Ğ¾Ñ‚ ĞºĞ¾Ñ€Ñ€ĞµĞºÑ‚Ğ½Ğ¾
* [x] `register_handlers()` Ğ¸ `run_polling()` Ğ´Ğ¾Ğ»Ğ¶Ğ½Ñ‹ Ğ±Ñ‹Ñ‚ÑŒ Ğ²Ñ‹Ğ·Ğ²Ğ°Ğ½Ñ‹ Ñ `await`
* [ ] Ğ¢Ñ‹ Ğ½Ğ° Ğ²ĞµÑ€Ğ½Ğ¾Ğ¼ Ğ¿ÑƒÑ‚Ğ¸ â€” Ğ¾ÑÑ‚Ğ°Ğ»Ğ¾ÑÑŒ Ğ¿Ñ€Ğ¾Ñ‚ĞµÑÑ‚Ğ¸Ñ€Ğ¾Ğ²Ğ°Ñ‚ÑŒ Ğ·Ğ°Ğ¿ÑƒÑĞº Ğ¸ ÑƒĞ±ĞµĞ´Ğ¸Ñ‚ÑŒÑÑ, Ñ‡Ñ‚Ğ¾ Ğ±Ğ¾Ñ‚ Ğ¾Ñ‚Ğ²ĞµÑ‡Ğ°ĞµÑ‚

---

ğŸŸ¢ Ğ“Ğ¾Ñ‚Ğ¾Ğ² ÑĞ³ĞµĞ½ĞµÑ€Ğ¸Ñ€Ğ¾Ğ²Ğ°Ñ‚ÑŒ Ğ´Ğ»Ñ Ñ‚ĞµĞ±Ñ Ğ¿Ğ¾Ğ»Ğ½Ñ‹Ğ¹ Ñ„Ğ¸Ğ½Ğ°Ğ»ÑŒĞ½Ñ‹Ğ¹ `handlers.py`, ĞµÑĞ»Ğ¸ Ñ…Ğ¾Ñ‡ĞµÑˆÑŒ â€” Ğ¸Ğ»Ğ¸ Ğ¼Ğ¾Ğ¶ĞµĞ¼ Ğ¿Ğ¾Ğ¹Ñ‚Ğ¸ Ğ¿Ğ¾ `jfood.py` Ğ¸ Ğ¾Ñ‡Ğ¸ÑÑ‚Ğ¸Ñ‚ÑŒ ĞµĞ³Ğ¾ Ğ¾Ñ‚ `CallbackContext`. Ğ“Ğ¾Ñ‚Ğ¾Ğ²?


    application = ApplicationBuilder().token(TOKEN).build()
-ĞºĞ°Ğº Ñ€Ğ°Ğ±Ğ¾Ñ‚Ğ°ĞµÑ‚ ÑÑ‚Ğ° ÑÑ‚Ñ€Ğ¾ĞºĞ°? Ğ¾Ğ±ÑŠÑÑĞ½Ğ¸ ÑÑƒÑ‚ÑŒ ĞºĞ°Ğ¶Ğ´Ğ¾Ğ³Ğ¾ ÑĞ»Ğ¾Ğ²Ğ°\ÑĞ¸Ğ¼Ğ²Ğ¾Ğ»Ğ°

Ğ° Ğ½Ğµ ÑĞ»Ğ¸ÑˆĞºĞ¾Ğ¼ Ğ»Ğ¸ Ğ¼Ğ½Ğ¾Ğ³Ğ¾, Ñ‡Ğ°ÑÑ‚Ğ¾ Ğ¸ Ğ³Ñ€Ğ¾Ğ¼Ğ¾Ğ·Ğ´ĞºĞ¾ Ğ²Ñ‹Ğ³Ğ»ÑĞ´Ğ¸Ñ‚ Ğ¿Ğ¾ÑÑ‚Ğ¾ÑĞ½Ğ½Ğ¾Ğµ ÑƒĞ¿Ğ¾Ñ‚Ñ€ĞµĞ±Ğ»ĞµĞ½Ğ¸Ğµ ÑĞ»Ğ¾Ğ²Ğ° await Ğ² ĞºĞ°Ğ¶Ğ´Ğ¾Ğ¹ ÑÑ‚Ñ€Ğ¾ĞºĞµ Ñ I/O Ğ»Ğ¾Ğ³Ğ¸ĞºĞ¾Ğ¹? Ğ­Ñ‚Ğ¾ Ğ¶Ğµ Ğ¿Ğ¾Ğ²Ñ‚Ğ¾Ñ€ÑĞµĞ¼Ğ¾ÑÑ‚ÑŒ - Ğ²Ñ‹Ğ³Ğ»ÑĞ´Ğ¸Ñ‚ Ğ¸ Ñ‡ÑƒĞ²ÑÑ‚Ğ²ÑƒĞµÑ‚ÑÑ ĞºĞ°Ğº ĞºĞ¾ÑÑ‚Ñ‹Ğ»ÑŒ, Ğ½Ğµ Ğ´ÑƒĞ¼Ğ°ĞµÑˆÑŒ?


if __name__ == "__main__":
    import asyncio
    asyncio.run(main())
- Ğ¸ Ñ‡Ñ‚Ğ¾ Ğ·Ğ´ĞµÑÑŒ Ğ¿Ñ€Ğ¾Ğ¸ÑÑ…Ğ¾Ğ´Ğ¸Ñ‚?

if __name__ == "__main__":
    import asyncio
    asyncio.run(main())
-1- Ñ Ñ‡ĞµÑÑ‚Ğ½Ğ¾ ÑĞºĞ°Ğ·Ğ°Ñ‚ÑŒ Ğ½Ğµ Ğ¿Ğ¾Ğ½Ğ¸Ğ¼Ğ°Ñ Ğ¿Ğ¾ĞºĞ° Ğ¿Ğ¾ÑĞ»ĞµĞ´Ğ½ĞµĞ³Ğ¾ Ğ±Ğ»Ğ¾ĞºĞ° Ñ if __name__ == "__main__": 
- Ñ‡Ñ‚Ğ¾ Ñ‚ÑƒÑ‚ Ğ¿Ñ€Ğ¾Ğ¸ÑÑ…Ğ¾Ğ´Ğ¸Ñ‚ Ğ¸ Ğ·Ğ°Ñ‡ĞµĞ¼? 